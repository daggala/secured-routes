{"code":"(this[\"webpackJsonpsecured-router\"]=this[\"webpackJsonpsecured-router\"]||[]).push([[0],{30:function(e,t,n){},54:function(e,t,n){\"use strict\";n.r(t);var r=n(1),c=n(0),a=n.n(c),s=n(22),u=n.n(s),o=(n(30),n(4)),i=n.n(o),j=n(7),b=n(11),p=n(8),l=n.n(p),d=n(55);var h=function(){var e=Object(c.useState)(),t=Object(b.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(),u=Object(b.a)(s,2),o=u[0],p=u[1],h=Object(d.a)(),x=function(){var e=Object(j.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.get(\"/protected\");case 3:200===e.sent.status?window.location.reload():window.location=\"http://localhost:5000/\",e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case\"end\":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,l.a.get(\"/authenticate\",{auth:{username:n,password:o}});case 4:200===e.sent.status&&(h.push(\"/protected\"),x()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case\"end\":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(\"div\",{className:\"App\",children:Object(r.jsxs)(\"form\",{onSubmit:O,children:[Object(r.jsx)(\"label\",{children:\"Username: \"}),Object(r.jsx)(\"br\",{}),Object(r.jsx)(\"input\",{type:\"text\",onChange:function(e){return a(e.target.value)}}),Object(r.jsx)(\"br\",{}),Object(r.jsx)(\"label\",{children:\"Password: \"}),Object(r.jsx)(\"br\",{}),Object(r.jsx)(\"input\",{type:\"password\",onChange:function(e){return p(e.target.value)}}),Object(r.jsx)(\"br\",{}),Object(r.jsx)(\"button\",{type:\"submit\",children:\"Login\"})]})})};var x=function(){return Object(r.jsx)(\"div\",{className:\"App\",children:Object(r.jsx)(h,{})})};u.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById(\"root\"))}},[[54,1,2]]]);","name":"static/js/main.f161b127.chunk.js","map":{"version":3,"sources":["static/js/main.f161b127.chunk.js"],"names":["this","push","30","module","exports","__webpack_require__","54","__webpack_exports__","r","jsx_runtime","react","react_default","n","react_dom","react_dom_default","regenerator","regenerator_default","asyncToGenerator","slicedToArray","axios","axios_default","react_router","src_LoginForm","_useState","Object","_useState2","username","setUsername","_useState3","_useState4","password","setPassword","history","getPrivateApp","_ref","a","mark","_callee","wrap","_context","prev","next","get","sent","status","window","location","reload","t0","console","log","stop","apply","arguments","auth","_ref2","_callee2","e","_context2","preventDefault","_x","className","children","onSubmit","type","onChange","target","value","src_App","render","StrictMode","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpsecured-router\"] = this[\"webpackJsonpsecured-router\"] || []).push([[0],{\n\n/***/ 30:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 54:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(22);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(30);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(4);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(8);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js + 6 modules\nvar react_router = __webpack_require__(55);\n\n// CONCATENATED MODULE: ./src/LoginForm.js\nfunction LoginForm(){var _useState=Object(react[\"useState\"])(),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=Object(react[\"useState\"])(),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var history=Object(react_router[\"a\" /* useHistory */])();var getPrivateApp=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var res;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios_default.a.get(\"/protected\");case 3:res=_context.sent;if(res.status===200){//Even though we're already at /protected path\n//we have to reload in order to make a HTTP call\n//to be able to fetch the index file for the private SPA.\nwindow.location.reload();}else{window.location=\"http://localhost:5000/\";}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getPrivateApp(){return _ref.apply(this,arguments);};}();var auth=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(e){var res;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return axios_default.a.get(\"/authenticate\",{auth:{username:username,password:password}});case 4:res=_context2.sent;if(res.status===200){//we're using history here to relocate the user, but without\n//making a new HTTP call\nhistory.push(\"/protected\");getPrivateApp();}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function auth(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{onSubmit:auth,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{children:\"Username: \"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{children:\"Password: \"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"submit\",children:\"Login\"})]})});}/* harmony default export */ var src_LoginForm = (LoginForm);\n// CONCATENATED MODULE: ./src/App.js\nfunction App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_LoginForm,{})});}/* harmony default export */ var src_App = (App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById(\"root\"));\n\n/***/ })\n\n},[[54,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/dagnygudmundsdottir/test/secured-routes/login-page/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/dagnygudmundsdottir/test/secured-routes/login-page/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/dagnygudmundsdottir/test/secured-routes/login-page/node_modules/postcss-loader/src/index.js??postcss!/Users/dagnygudmundsdottir/test/secured-routes/login-page/src/index.css","/Users/dagnygudmundsdottir/test/secured-routes/login-page/src/LoginForm.js","/Users/dagnygudmundsdottir/test/secured-routes/login-page/src/App.js","/Users/dagnygudmundsdottir/test/secured-routes/login-page/src/index.js"],"names":["LoginForm","useState","username","setUsername","password","setPassword","history","useHistory","getPrivateApp","axios","get","res","status","window","location","reload","console","log","auth","e","preventDefault","push","target","value","App","ReactDOM","render","document","getElementById"],"mappings":";;;;;AAAA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACIA,QAASA,UAAT,EAAqB,eACaC,yBAAQ,EADrB,kEACZC,QADY,eACFC,WADE,8BAEaF,yBAAQ,EAFrB,mEAEZG,QAFY,eAEFC,WAFE,eAInB,GAAMC,QAAO,CAAGC,0CAAU,EAA1B,CAEA,GAAMC,cAAa,sHAAG,mLAEAC,gBAAK,CAACC,GAAN,CAAU,YAAV,CAFA,QAEZC,GAFY,eAGlB,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CACtB;AACA;AACA;AACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACD,CALD,IAKO,CACLF,MAAM,CAACC,QAAP,CAAkB,wBAAlB,CACD,CAViB,+EAYlBE,OAAO,CAACC,GAAR,cAZkB,oEAAH,kBAAbT,cAAa,0CAAnB,CAgBA,GAAMU,KAAI,uHAAG,kBAAOC,CAAP,gIACXA,CAAC,CAACC,cAAF,GADW,wCAGSX,gBAAK,CAACC,GAAN,CAAU,eAAV,CAA2B,CAC3CQ,IAAI,CAAE,CAAEhB,QAAQ,CAARA,QAAF,CAAYE,QAAQ,CAARA,QAAZ,CADqC,CAA3B,CAHT,QAGHO,GAHG,gBAMT,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CACtB;AACA;AACAN,OAAO,CAACe,IAAR,CAAa,YAAb,EACAb,aAAa,GACd,CAXQ,mFAaTQ,OAAO,CAACC,GAAR,eAbS,sEAAH,kBAAJC,KAAI,6CAAV,CAiBA,mBACE,kCAAK,SAAS,CAAC,KAAf,uBACE,oCAAM,QAAQ,CAAEA,IAAhB,wBACE,2DADF,cAEE,mCAFF,cAGE,oCAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAE,kBAACC,CAAD,QAAOhB,YAAW,CAACgB,CAAC,CAACG,MAAF,CAASC,KAAV,CAAlB,EAA7B,EAHF,cAIE,mCAJF,cAKE,2DALF,cAME,mCANF,cAOE,oCAAO,IAAI,CAAC,UAAZ,CAAuB,QAAQ,CAAE,kBAACJ,CAAD,QAAOd,YAAW,CAACc,CAAC,CAACG,MAAF,CAASC,KAAV,CAAlB,EAAjC,EAPF,cAQE,mCARF,cASE,qCAAQ,IAAI,CAAC,QAAb,mBATF,GADF,EADF,CAeD,CAEcvB,2DAAf,E;;ACxDA,QAASwB,IAAT,EAAe,CACb,mBACE,kCAAK,SAAS,CAAC,KAAf,uBACE,2BAAC,aAAD,IADF,EADF,CAKD,CAEcA,+CAAf,E;;ACPAC,mBAAQ,CAACC,MAAT,cACE,2BAAC,eAAD,CAAO,UAAP,wBACE,2BAAC,OAAD,IADF,EADF,CAIEC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAJF,E","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction LoginForm() {\n  const [username, setUsername] = useState();\n  const [password, setPassword] = useState();\n\n  const history = useHistory();\n\n  const getPrivateApp = async () => {\n    try {\n      const res = await axios.get(\"/protected\");\n      if (res.status === 200) {\n        //Even though we're already at /protected path\n        //we have to reload in order to make a HTTP call\n        //to be able to fetch the index file for the private SPA.\n        window.location.reload();\n      } else {\n        window.location = \"http://localhost:5000/\";\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const auth = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await axios.get(\"/authenticate\", {\n        auth: { username, password },\n      });\n      if (res.status === 200) {\n        //we're using history here to relocate the user, but without\n        //making a new HTTP call\n        history.push(\"/protected\");\n        getPrivateApp();\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <form onSubmit={auth}>\n        <label>Username: </label>\n        <br />\n        <input type=\"text\" onChange={(e) => setUsername(e.target.value)} />\n        <br />\n        <label>Password: </label>\n        <br />\n        <input type=\"password\" onChange={(e) => setPassword(e.target.value)} />\n        <br />\n        <button type=\"submit\">Login</button>\n      </form>\n    </div>\n  );\n}\n\nexport default LoginForm;\n","import React from \"react\";\nimport { Switch, BrowserRouter as Router } from \"react-router-dom\";\nimport LoginForm from \"./LoginForm\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <LoginForm />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"]}}