{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dagnygudmundsdottir/tests/secured-router/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dagnygudmundsdottir/tests/secured-router/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/dagnygudmundsdottir/tests/secured-router/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect,Suspense}from\"react\";import axios from\"axios\";import{Link,Switch,BrowserRouter as Router,Route}from\"react-router-dom\";import Tutorial from\"./Tutorial\";function App(){var _useState=useState(\"auth\"),_useState2=_slicedToArray(_useState,2),screen=_useState2[0],setScreen=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var auth=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/authenticate\",{auth:{username:username,password:password}});case 3:res=_context.sent;if(res.data.screen!==undefined){setScreen(res.data.screen);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function auth(){return _ref.apply(this,arguments);};}();var readCookie=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"/read-cookie\");case 3:res=_context2.sent;if(res.data.screen!==undefined){setScreen(res.data.screen);}_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);setScreen(\"auth\");console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function readCookie(){return _ref2.apply(this,arguments);};}();useEffect(function(){readCookie();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/protected\"}),/*#__PURE__*/_jsx(Route,{path:\"/\",children:/*#__PURE__*/_jsx(Tutorial,{})})]})})});}export default App;","map":{"version":3,"sources":["/Users/dagnygudmundsdottir/tests/secured-router/client/src/App.js"],"names":["React","useState","useEffect","Suspense","axios","Link","Switch","BrowserRouter","Router","Route","Tutorial","App","screen","setScreen","username","setUsername","password","setPassword","auth","get","res","data","undefined","console","log","readCookie"],"mappings":"gfAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,QAArC,KAAqD,OAArD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,MAAf,CAAuBC,aAAa,GAAIC,CAAAA,MAAxC,CAAgDC,KAAhD,KAA6D,kBAA7D,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,QAASC,CAAAA,GAAT,EAAe,eACeV,QAAQ,CAAC,MAAD,CADvB,wCACNW,MADM,eACEC,SADF,8BAEmBZ,QAAQ,EAF3B,yCAENa,QAFM,eAEIC,WAFJ,8BAGmBd,QAAQ,EAH3B,yCAGNe,QAHM,eAGIC,WAHJ,eAKb,GAAMC,CAAAA,IAAI,0FAAG,iLAESd,CAAAA,KAAK,CAACe,GAAN,CAAU,eAAV,CAA2B,CAC3CD,IAAI,CAAE,CAAEJ,QAAQ,CAARA,QAAF,CAAYE,QAAQ,CAARA,QAAZ,CADqC,CAA3B,CAFT,QAEHI,GAFG,eAMT,GAAIA,GAAG,CAACC,IAAJ,CAAST,MAAT,GAAoBU,SAAxB,CAAmC,CACjCT,SAAS,CAACO,GAAG,CAACC,IAAJ,CAAST,MAAV,CAAT,CACD,CARQ,+EAUTW,OAAO,CAACC,GAAR,cAVS,oEAAH,kBAAJN,CAAAA,IAAI,0CAAV,CAcA,GAAMO,CAAAA,UAAU,2FAAG,wLAEGrB,CAAAA,KAAK,CAACe,GAAN,CAAU,cAAV,CAFH,QAETC,GAFS,gBAIf,GAAIA,GAAG,CAACC,IAAJ,CAAST,MAAT,GAAoBU,SAAxB,CAAmC,CACjCT,SAAS,CAACO,GAAG,CAACC,IAAJ,CAAST,MAAV,CAAT,CACD,CANc,mFAQfC,SAAS,CAAC,MAAD,CAAT,CACAU,OAAO,CAACC,GAAR,eATe,sEAAH,kBAAVC,CAAAA,UAAU,2CAAhB,CAaAvB,SAAS,CAAC,UAAM,CACduB,UAAU,GACX,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,KAAC,MAAD,wBACE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAC,YAAZ,EADF,cAEE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,uBACE,KAAC,QAAD,IADF,EAFF,GADF,EADF,EADF,CAYD,CAED,cAAed,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect, Suspense } from \"react\";\nimport axios from \"axios\";\nimport { Link, Switch, BrowserRouter as Router, Route } from \"react-router-dom\";\nimport Tutorial from \"./Tutorial\";\nfunction App() {\n  const [screen, setScreen] = useState(\"auth\");\n  const [username, setUsername] = useState();\n  const [password, setPassword] = useState();\n\n  const auth = async () => {\n    try {\n      const res = await axios.get(\"/authenticate\", {\n        auth: { username, password },\n      });\n\n      if (res.data.screen !== undefined) {\n        setScreen(res.data.screen);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const readCookie = async () => {\n    try {\n      const res = await axios.get(\"/read-cookie\");\n\n      if (res.data.screen !== undefined) {\n        setScreen(res.data.screen);\n      }\n    } catch (e) {\n      setScreen(\"auth\");\n      console.log(e);\n    }\n  };\n\n  useEffect(() => {\n    readCookie();\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <Switch>\n          <Route path=\"/protected\"></Route>\n          <Route path=\"/\">\n            <Tutorial />\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}