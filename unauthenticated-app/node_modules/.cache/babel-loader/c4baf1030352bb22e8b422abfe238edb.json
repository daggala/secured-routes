{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/dagnygudmundsdottir/tests/secured-router/client/src/App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect, Suspense } from \"react\";\nimport axios from \"axios\";\nimport { Link, Router, Route } from \"react-router-dom\";\nconst LazyLoaded = /*#__PURE__*/React.lazy(_c = () => import(\"./LazyLoaded\"));\n_c2 = LazyLoaded;\n\nfunction View(props) {\n  _s();\n\n  const {\n    screen,\n    setScreen\n  } = props;\n  const [box, showBox] = useState(false);\n  const [data, setData] = useState();\n\n  const deleteCookie = async () => {\n    try {\n      await axios.get(\"/clear-cookie\");\n      setScreen(\"auth\");\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const getData = async () => {\n    try {\n      const res = await axios.get(\"/get-data\");\n      console.log(res.data);\n      setData(res.data);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Suspense, {\n        fallback: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 29\n        }, this),\n        children: box ? /*#__PURE__*/_jsxDEV(LazyLoaded, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 18\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: screen\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: getData,\n        children: \"Get Data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => showBox(!box),\n        children: \"Show Red box\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deleteCookie,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n}\n\n_s(View, \"dy3LCLZ48SaR2DD7WsAyWhiEikU=\");\n\n_c3 = View;\n\nfunction App() {\n  _s2();\n\n  const [screen, setScreen] = useState(\"auth\");\n  const [username, setUsername] = useState();\n  const [password, setPassword] = useState();\n\n  const auth = async () => {\n    try {\n      const res = await axios.get(\"/authenticate\", {\n        auth: {\n          username,\n          password\n        }\n      });\n\n      if (res.data.screen !== undefined) {\n        setScreen(res.data.screen);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const readCookie = async () => {\n    try {\n      const res = await axios.get(\"/read-cookie\");\n\n      if (res.data.screen !== undefined) {\n        setScreen(res.data.screen);\n      }\n    } catch (e) {\n      setScreen(\"auth\");\n      console.log(e);\n    }\n  };\n\n  useEffect(() => {\n    readCookie();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: screen === \"auth\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Username: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onChange: e => setUsername(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: auth,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(View, {\n      screen: screen,\n      setScreen: setScreen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(App, \"BrrOt3uD+BGW4F0KtcARG2iMwqE=\");\n\n_c4 = App;\nexport default App;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"LazyLoaded$React.lazy\");\n$RefreshReg$(_c2, \"LazyLoaded\");\n$RefreshReg$(_c3, \"View\");\n$RefreshReg$(_c4, \"App\");","map":{"version":3,"sources":["/Users/dagnygudmundsdottir/tests/secured-router/client/src/App.js"],"names":["React","useState","useEffect","Suspense","axios","Link","Router","Route","LazyLoaded","lazy","View","props","screen","setScreen","box","showBox","data","setData","deleteCookie","get","e","console","log","getData","res","App","username","setUsername","password","setPassword","auth","undefined","readCookie","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Suspense } from \"react\";\nimport axios from \"axios\";\nimport { Link, Router, Route } from \"react-router-dom\";\n\nconst LazyLoaded = React.lazy(() => import(\"./LazyLoaded\"));\n\nfunction View(props) {\n  const { screen, setScreen } = props;\n  const [box, showBox] = useState(false);\n  const [data, setData] = useState();\n\n  const deleteCookie = async () => {\n    try {\n      await axios.get(\"/clear-cookie\");\n      setScreen(\"auth\");\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const getData = async () => {\n    try {\n      const res = await axios.get(\"/get-data\");\n      console.log(res.data);\n      setData(res.data);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return (\n    <Router>\n      <div>\n        <Suspense fallback={<div>Loading...</div>}>\n          {box ? <LazyLoaded /> : null}\n        </Suspense>\n\n        {/* <Link to=\"/protected\">\n          <p>To protected</p>\n        </Link> */}\n\n        <p>{screen}</p>\n        <p>{data}</p>\n\n        <button onClick={getData}>Get Data</button>\n        <button onClick={() => showBox(!box)}>Show Red box</button>\n        <button onClick={deleteCookie}>Logout</button>\n      </div>\n    </Router>\n  );\n}\n\nfunction App() {\n  const [screen, setScreen] = useState(\"auth\");\n  const [username, setUsername] = useState();\n  const [password, setPassword] = useState();\n\n  const auth = async () => {\n    try {\n      const res = await axios.get(\"/authenticate\", {\n        auth: { username, password },\n      });\n\n      if (res.data.screen !== undefined) {\n        setScreen(res.data.screen);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const readCookie = async () => {\n    try {\n      const res = await axios.get(\"/read-cookie\");\n\n      if (res.data.screen !== undefined) {\n        setScreen(res.data.screen);\n      }\n    } catch (e) {\n      setScreen(\"auth\");\n      console.log(e);\n    }\n  };\n\n  useEffect(() => {\n    readCookie();\n  }, []);\n\n  return (\n    <div className=\"App\">\n      {screen === \"auth\" ? (\n        <div>\n          <label>Username: </label>\n          <br />\n          <input type=\"text\" onChange={(e) => setUsername(e.target.value)} />\n          <br />\n          <label>Password: </label>\n          <br />\n          <input\n            type=\"password\"\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          <br />\n          <button onClick={auth}>Login</button>\n        </div>\n      ) : (\n        <View screen={screen} setScreen={setScreen} />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}